ref: fedora/rawhide/${basearch}/ostree-base

automatic-version-prefix: "30"
mutate-os-release: "30"

include:
  - fedora-common-ostree-pkgs.yaml
  - fedora-coreos-config/fedora-coreos-base.yaml

# Disable the special `core` user; it's a server thing.
# For desktops we expect to use gnome-initial-setup.
postprocess:
  - |
    #/usr/bin/bash
    exec rm -v /usr/lib/dracut/modules.d/40ignition-conf/base.ign

repos:
  - fedora
  - fedora-updates
  - fedora-coreos-pool

packages:
  - git-core
  - lvm2
  - rpm-ostree
  # Container management
  - buildah
  - podman
  - skopeo
  - toolbox
  # Flatpak support
  - flatpak
  - flatpak-builder
  - xdg-desktop-portal
  # HFS filesystem tools for Apple hardware
  # See https://github.com/projectatomic/rpm-ostree/issues/1380
  - hfsplus-tools
  # Things that are turned off by recommends that we want;
  # TPM management is nice.
  - trousers
  # Bundle the minimal -devel packages needed to build a kernel.
  # This is needed because we can't rely on layering to install these
  # due to version conflicts with the base image.
  - glibc-devel
  - kernel-devel
  - elfutils-libelf-devel
  # Contains default ostree remote config to be used on client's
  # system for fetching ostree update
  - fedora-repos-ostree

# Override this from FCOS
documentation: true

ignore-removed-users:
  - root
ignore-removed-groups:
  - root
check-passwd: { type: file, filename: passwd }
check-groups: { type: file, filename: group }

default-target: graphical.target
